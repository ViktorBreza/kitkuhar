(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[245],{1541:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/recipes",function(){return s(2798)}])},2798:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(7876),n=s(4232),r=s(8230),c=s.n(r),i=s(5174),l=s(9099),d=s(5777),o=s(5593),m=s(3578),h=s(2605),x=s(5364);class u{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseURL).concat(e),a=t.method||"GET",n=localStorage.getItem("token"),r={...this.defaultHeaders,...n&&{Authorization:"Bearer ".concat(n)},...t.headers},c={...t,headers:r},i=Date.now();try{let t;h.vF.logApiCall(a,e);let n=await fetch(s,c),r=Date.now()-i;r>2e3&&h.vF.warn("Slow API call: ".concat(a," ").concat(e," took ").concat(r,"ms"));let l=n.headers.get("content-type");if(l&&l.includes("application/json")&&(t=await n.json()),!n.ok){let s=(null==t?void 0:t.detail)||"HTTP ".concat(n.status);return h.vF.logApiCall(a,e,n.status,Error(s)),{error:s,status:n.status,data:t}}return h.vF.debug("API call successful: ".concat(a," ").concat(e),{data:{status:n.status,duration:r}}),{data:t,status:n.status}}catch(t){return h.vF.logApiCall(a,e,0,t),{error:t instanceof Error?t.message:"Network error",status:0}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}async uploadFile(e,t){let s=localStorage.getItem("token"),a={};return s&&(a.Authorization="Bearer ".concat(s)),this.request(e,{method:"POST",body:t,headers:a})}constructor(e=x.env.NEXT_PUBLIC_API_URL||"/api"){this.baseURL=e,this.defaultHeaders={"Content-Type":"application/json"}}}let p=new u,g=e=>{let{onDelete:t}=e,{isAuthenticated:s,token:r,isAdmin:i}=(0,o.A)();(0,l.useRouter)();let[h,x]=(0,n.useState)([]),[u,g]=(0,n.useState)(!0),[j,N]=(0,n.useState)(null),b=async()=>{try{g(!0);let e=await p.get(m.S.RECIPES);if(console.log("API response:",e),e.error)N(e.error);else{let t=Array.isArray(e.data)?e.data:[];console.log("Setting recipes:",t),x(t)}}catch(e){N("Не вдалося завантажити рецепти."),console.error(e)}finally{g(!1)}};(0,n.useEffect)(()=>{b()},[]);let f=async e=>{if(window.confirm("Ви впевнені, що хочете видалити цей рецепт?"))try{await p.delete(m.S.RECIPE_DELETE(e)),x(h.filter(t=>t.id!==e)),t&&t()}catch(e){console.error("Error deleting recipe:",e),alert("Не вдалося видалити рецепт.")}};return u?(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"spinner-border",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Завантаження..."})})}):j?(0,a.jsx)("div",{className:"alert alert-danger",role:"alert",children:j}):0===h.length?(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)("h3",{children:"Поки що рецептів немає"}),(0,a.jsx)("p",{children:"Будьте першим, хто поділиться смачним рецептом!"}),s&&(0,a.jsx)(c(),{href:"/add-recipe",className:"btn btn-primary",children:"Додати рецепт"})]}):(0,a.jsx)("div",{className:"row",children:h.map(e=>(0,a.jsx)("div",{className:"col-lg-4 col-md-6 mb-4",children:(0,a.jsxs)("div",{className:"card h-100",children:[(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("h5",{className:"card-title",children:e.title}),e.description&&(0,a.jsx)("p",{className:"card-text text-muted small",children:e.description.length>100?"".concat(e.description.substring(0,100),"..."):e.description}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("small",{className:"text-muted",children:[(0,a.jsx)("i",{className:"bi bi-people-fill me-1"}),"Порцій: ",e.servings]})}),e.category&&(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsx)("span",{className:"badge bg-primary",children:e.category.name})}),e.tags&&e.tags.length>0&&(0,a.jsx)("div",{className:"mb-2",children:e.tags.map(e=>(0,a.jsx)("span",{className:"badge bg-secondary me-1",children:e.name},e.id))}),(0,a.jsx)(d.A,{recipeId:e.id})]}),(0,a.jsx)("div",{className:"card-footer bg-transparent",children:(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,a.jsx)(c(),{href:"/recipes/".concat(e.id),className:"btn btn-outline-primary btn-sm",children:"Переглянути"}),(s||i)&&(0,a.jsxs)("div",{className:"btn-group",role:"group",children:[(0,a.jsx)(c(),{href:"/edit-recipe/".concat(e.id),className:"btn btn-outline-secondary btn-sm",children:"Редагувати"}),(0,a.jsx)("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>f(e.id),children:"Видалити"})]})]})})]})},e.id))})},j=()=>(0,a.jsx)(i.A,{title:"Рецепти - Кіт Кухар",description:"Всі рецепти від нашого котика-кухаря. Знайдіть свій ідеальний рецепт!",children:(0,a.jsxs)("div",{className:"position-relative",children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"50",height:"50",className:"me-3 opacity-75",style:{animation:"gentle-float 4s ease-in-out infinite"}}),(0,a.jsx)("h2",{className:"mb-0",children:"Рецепти від Кота Кухаря"})]}),(0,a.jsxs)(c(),{href:"/add-recipe",className:"btn btn-success btn-lg",children:[(0,a.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Додати рецепт"]})]}),(0,a.jsx)("p",{children:"Оберіть рецепт від нашого котика-кухаря, щоб дізнатися всі секрети приготування!"}),(0,a.jsx)("hr",{}),(0,a.jsx)(g,{})]})})},5174:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(7876),n=s(4232),r=s(7328),c=s.n(r),i=s(9099),l=s(5593),d=s(2605),o=s(8230),m=s.n(o);let h=()=>{let{isAuthenticated:e,isAdmin:t,user:s,logout:n}=(0,l.A)(),r=(0,i.useRouter)();return(0,a.jsx)("header",{children:(0,a.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom",children:[(0,a.jsxs)(m(),{href:"/",className:"d-flex align-items-center text-dark text-decoration-none",children:[(0,a.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"40",height:"40",className:"me-2"}),(0,a.jsx)("span",{className:"fs-4",children:"Кіт Кухар"})]}),(0,a.jsxs)("nav",{className:"d-inline-flex mt-2 mt-md-0 ms-md-auto align-items-center",children:[(0,a.jsx)(m(),{href:"/",className:"me-3 py-2 text-dark text-decoration-none ".concat("/"===r.pathname?"active":""),children:"Головна"}),(0,a.jsx)(m(),{href:"/recipes",className:"me-3 py-2 text-dark text-decoration-none ".concat(r.pathname.startsWith("/recipes")?"active":""),children:"Рецепти"}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m(),{href:"/add-recipe",className:"me-3 py-2 text-dark text-decoration-none ".concat("/add-recipe"===r.pathname?"active":""),children:"Додати рецепт"}),t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m(),{href:"/categories",className:"me-3 py-2 text-dark text-decoration-none ".concat(r.pathname.startsWith("/categories")?"active":""),children:"Категорії"}),(0,a.jsx)(m(),{href:"/tags",className:"me-3 py-2 text-dark text-decoration-none ".concat(r.pathname.startsWith("/tags")?"active":""),children:"Теги"})]})]}),e?(0,a.jsxs)("div",{className:"dropdown",children:[(0,a.jsxs)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[null==s?void 0:s.username,t&&(0,a.jsx)("span",{className:"badge bg-warning text-dark ms-1",children:"Адмін"})]}),(0,a.jsx)("ul",{className:"dropdown-menu",children:(0,a.jsx)("li",{children:(0,a.jsx)("button",{className:"dropdown-item",onClick:()=>{n(),r.push("/login")},children:"Вийти"})})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m(),{href:"/login",className:"me-3 py-2 text-dark text-decoration-none ".concat("/login"===r.pathname?"active":""),children:"Вхід"}),(0,a.jsx)(m(),{href:"/register",className:"btn btn-outline-primary ".concat("/register"===r.pathname?"active":""),children:"Реєстрація"})]})]})]})})},x=e=>{let{children:t,title:s="Кіт Кухар - Найкращі рецепти",description:r="Найкращі рецепти від нашого котика-кухаря! Знайдіть смачні страви або поділіться власними кулінарними шедеврами."}=e,o=(0,i.useRouter)(),{user:m}=(0,l.A)();return(0,n.useEffect)(()=>{d.vF.logPageView(o.pathname,null==m?void 0:m.id)},[o.pathname,m]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{children:s}),(0,a.jsx)("meta",{name:"description",content:r}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)("div",{className:"container py-3",children:[(0,a.jsx)(h,{}),(0,a.jsx)("main",{children:t}),(0,a.jsx)("footer",{className:"pt-4 my-md-5 pt-md-5 border-top",children:(0,a.jsxs)("div",{className:"row align-items-center",children:[(0,a.jsx)("div",{className:"col-12 col-md-6",children:(0,a.jsx)("small",{className:"d-block mb-3 text-muted",children:"\xa9 2025"})}),(0,a.jsx)("div",{className:"col-12 col-md-6 text-end",children:(0,a.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"30",height:"30",className:"opacity-50"})})]})})]})]})}},5777:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(7876),n=s(4232),r=s(5593);let c=e=>{let{recipeId:t,showLabel:s=!0,size:c="md",readonly:i=!1}=e,[l,d]=(0,n.useState)(null),[o,m]=(0,n.useState)(null),[h,x]=(0,n.useState)(null),[u,p]=(0,n.useState)(!0),{token:g}=(0,r.A)(),j={sm:"fs-6",md:"fs-4",lg:"fs-2"}[c];(0,n.useEffect)(()=>{(async()=>{try{x({average_rating:null,total_ratings:0,total_comments:0}),d(null)}catch(e){console.error("Error fetching rating data:",e)}finally{p(!1)}})()},[t,g]);let N=async e=>{if(!i)try{d(e),console.log("Rating submitted:",e)}catch(e){console.error("Error submitting rating:",e)}};return u?(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Завантаження рейтингу..."})}),s&&(0,a.jsx)("span",{className:"text-muted",children:"Завантаження..."})]}):(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("div",{className:"me-2",children:(()=>{let e=[],t=o||l||(null==h?void 0:h.average_rating)||0;for(let s=1;s<=5;s++){let n=s<=t,r=!i&&!u;e.push((0,a.jsx)("button",{type:"button",className:"btn p-0 border-0 bg-transparent ".concat(j),style:{color:n?"#ffc107":"#e4e5e9",cursor:r?"pointer":"default"},onClick:()=>r&&N(s),onMouseEnter:()=>r&&m(s),onMouseLeave:()=>r&&m(null),disabled:!r,"aria-label":"Rate ".concat(s," stars"),children:"⭐"},s))}return e})()}),s&&h&&(0,a.jsx)("small",{className:"text-muted",children:h.average_rating?"".concat(h.average_rating.toFixed(1)," (").concat(h.total_ratings,")"):"Поки без оцінок"})]})}}},e=>{e.O(0,[305,636,593,792],()=>e(e.s=1541)),_N_E=e.O()}]);