(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[361],{5174:(e,s,a)=>{"use strict";a.d(s,{A:()=>x});var t=a(7876),n=a(4232),r=a(7328),l=a.n(r),i=a(9099),c=a(5593),d=a(2605),o=a(8230),m=a.n(o);let h=()=>{let{isAuthenticated:e,isAdmin:s,user:a,logout:n}=(0,c.A)(),r=(0,i.useRouter)();return(0,t.jsx)("header",{children:(0,t.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom",children:[(0,t.jsxs)(m(),{href:"/",className:"d-flex align-items-center text-dark text-decoration-none",children:[(0,t.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"40",height:"40",className:"me-2"}),(0,t.jsx)("span",{className:"fs-4",children:"Кіт Кухар"})]}),(0,t.jsxs)("nav",{className:"d-inline-flex mt-2 mt-md-0 ms-md-auto align-items-center",children:[(0,t.jsx)(m(),{href:"/",className:"me-3 py-2 text-dark text-decoration-none ".concat("/"===r.pathname?"active":""),children:"Головна"}),(0,t.jsx)(m(),{href:"/recipes",className:"me-3 py-2 text-dark text-decoration-none ".concat(r.pathname.startsWith("/recipes")?"active":""),children:"Рецепти"}),e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m(),{href:"/add-recipe",className:"me-3 py-2 text-dark text-decoration-none ".concat("/add-recipe"===r.pathname?"active":""),children:"Додати рецепт"}),s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m(),{href:"/categories",className:"me-3 py-2 text-dark text-decoration-none ".concat(r.pathname.startsWith("/categories")?"active":""),children:"Категорії"}),(0,t.jsx)(m(),{href:"/tags",className:"me-3 py-2 text-dark text-decoration-none ".concat(r.pathname.startsWith("/tags")?"active":""),children:"Теги"})]})]}),e?(0,t.jsxs)("div",{className:"dropdown",children:[(0,t.jsxs)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[null==a?void 0:a.username,s&&(0,t.jsx)("span",{className:"badge bg-warning text-dark ms-1",children:"Адмін"})]}),(0,t.jsx)("ul",{className:"dropdown-menu",children:(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:"dropdown-item",onClick:()=>{n(),r.push("/login")},children:"Вийти"})})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m(),{href:"/login",className:"me-3 py-2 text-dark text-decoration-none ".concat("/login"===r.pathname?"active":""),children:"Вхід"}),(0,t.jsx)(m(),{href:"/register",className:"btn btn-outline-primary ".concat("/register"===r.pathname?"active":""),children:"Реєстрація"})]})]})]})})},x=e=>{let{children:s,title:a="Кіт Кухар - Найкращі рецепти",description:r="Найкращі рецепти від нашого котика-кухаря! Знайдіть смачні страви або поділіться власними кулінарними шедеврами."}=e,o=(0,i.useRouter)(),{user:m}=(0,c.A)();return(0,n.useEffect)(()=>{d.vF.logPageView(o.pathname,null==m?void 0:m.id)},[o.pathname,m]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{children:[(0,t.jsx)("title",{children:a}),(0,t.jsx)("meta",{name:"description",content:r}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"container py-3",children:[(0,t.jsx)(h,{}),(0,t.jsx)("main",{children:s}),(0,t.jsx)("footer",{className:"pt-4 my-md-5 pt-md-5 border-top",children:(0,t.jsxs)("div",{className:"row align-items-center",children:[(0,t.jsx)("div",{className:"col-12 col-md-6",children:(0,t.jsx)("small",{className:"d-block mb-3 text-muted",children:"\xa9 2025"})}),(0,t.jsx)("div",{className:"col-12 col-md-6 text-end",children:(0,t.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"30",height:"30",className:"opacity-50"})})]})})]})]})}},5777:(e,s,a)=>{"use strict";a.d(s,{A:()=>l});var t=a(7876),n=a(4232),r=a(5593);let l=e=>{let{recipeId:s,showLabel:a=!0,size:l="md",readonly:i=!1}=e,[c,d]=(0,n.useState)(null),[o,m]=(0,n.useState)(null),[h,x]=(0,n.useState)(null),[u,j]=(0,n.useState)(!0),{token:p}=(0,r.A)(),g={sm:"fs-6",md:"fs-4",lg:"fs-2"}[l];(0,n.useEffect)(()=>{(async()=>{try{x({average_rating:null,total_ratings:0,total_comments:0}),d(null)}catch(e){console.error("Error fetching rating data:",e)}finally{j(!1)}})()},[s,p]);let N=async e=>{if(!i)try{d(e),console.log("Rating submitted:",e)}catch(e){console.error("Error submitting rating:",e)}};return u?(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)("div",{className:"spinner-border spinner-border-sm me-2",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Завантаження рейтингу..."})}),a&&(0,t.jsx)("span",{className:"text-muted",children:"Завантаження..."})]}):(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)("div",{className:"me-2",children:(()=>{let e=[],s=o||c||(null==h?void 0:h.average_rating)||0;for(let a=1;a<=5;a++){let n=a<=s,r=!i&&!u;e.push((0,t.jsx)("button",{type:"button",className:"btn p-0 border-0 bg-transparent ".concat(g),style:{color:n?"#ffc107":"#e4e5e9",cursor:r?"pointer":"default"},onClick:()=>r&&N(a),onMouseEnter:()=>r&&m(a),onMouseLeave:()=>r&&m(null),disabled:!r,"aria-label":"Rate ".concat(a," stars"),children:"⭐"},a))}return e})()}),a&&h&&(0,t.jsx)("small",{className:"text-muted",children:h.average_rating?"".concat(h.average_rating.toFixed(1)," (").concat(h.total_ratings,")"):"Поки без оцінок"})]})}},7475:(e,s,a)=>{"use strict";a.r(s),a.d(s,{__N_SSP:()=>u,default:()=>j});var t=a(7876),n=a(4232),r=a(9099),l=a(5174),i=a(8230),c=a.n(i),d=a(1040),o=a(5593),m=a(3578),h=a(5777);let x=e=>{let{recipeId:s}=e,[a,l]=(0,n.useState)(null),[i,x]=(0,n.useState)(!0),[u,j]=(0,n.useState)(null),{isAuthenticated:p,isAdmin:g}=(0,o.A)();if((0,r.useRouter)(),(0,n.useEffect)(()=>{let e=async()=>{try{let e=await d.A.get("".concat(m.S.RECIPES,"/").concat(s));l(e.data)}catch(e){j("Не вдалося завантажити рецепт"),console.error(e)}finally{x(!1)}};s&&e()},[s]),i)return(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("div",{className:"spinner-border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Завантаження..."})})});if(u||!a)return(0,t.jsx)("div",{className:"alert alert-danger",role:"alert",children:u||"Рецепт не знайдено"});let N="string"==typeof a.steps?a.steps.split("\n").filter(e=>e.trim()):a.steps;return(0,t.jsxs)("div",{className:"recipe-detail",children:[(0,t.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"mb-2",children:a.title}),(0,t.jsx)(h.A,{recipeId:a.id})]}),(p||g)&&(0,t.jsx)("div",{className:"btn-group",children:(0,t.jsx)(c(),{href:"/edit-recipe/".concat(a.id),className:"btn btn-outline-secondary",children:"Редагувати"})})]}),a.description&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("p",{className:"lead",children:a.description})}),(0,t.jsxs)("div",{className:"row mb-4",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("h3",{children:"Інгредієнти"}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Порцій:"})," ",a.servings]}),(0,t.jsx)("ul",{className:"list-unstyled",children:a.ingredients.map((e,s)=>(0,t.jsxs)("li",{className:"mb-2",children:[(0,t.jsx)("i",{className:"bi bi-check-circle-fill text-success me-2"}),e.quantity," ",e.unit," ",e.name]},s))})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[a.category&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("strong",{children:"Категорія:"}),(0,t.jsx)("span",{className:"badge bg-primary ms-2",children:a.category.name})]}),a.tags&&a.tags.length>0&&(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("strong",{children:"Теги:"}),(0,t.jsx)("div",{className:"mt-2",children:a.tags.map(e=>(0,t.jsx)("span",{className:"badge bg-secondary me-1",children:e.name},e.id))})]})]})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h3",{children:"Інструкції"}),(0,t.jsx)("ol",{className:"list-group list-group-numbered",children:Array.isArray(N)?N.map((e,s)=>(0,t.jsx)("li",{className:"list-group-item border-0 bg-transparent",children:"string"==typeof e?e:e.description},s)):(0,t.jsx)("li",{className:"list-group-item border-0 bg-transparent",children:N})})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(c(),{href:"/recipes",className:"btn btn-secondary",children:"← Назад до рецептів"})})]})};var u=!0;let j=e=>{let{id:s}=e;return(0,r.useRouter)().isFallback?(0,t.jsx)(l.A,{children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("div",{className:"spinner-border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Завантаження..."})})})}):(0,t.jsx)(l.A,{title:"Рецепт - Кіт Кухар",description:"Переглядайте детальну інформацію про рецепт",children:(0,t.jsx)(x,{recipeId:parseInt(s)})})}},8378:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/recipes/[id]",function(){return a(7475)}])}},e=>{e.O(0,[305,40,636,593,792],()=>e(e.s=8378)),_N_E=e.O()}]);