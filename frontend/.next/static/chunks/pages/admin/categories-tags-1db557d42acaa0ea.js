(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{54:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});var t=s(7876),n=s(4232),i=s(9099),c=s(5593);let l=e=>{let{children:a,adminRequired:s=!1}=e,{isAuthenticated:l,isAdmin:r,loading:d}=(0,c.A)(),o=(0,i.useRouter)();return((0,n.useEffect)(()=>{d||l||o.push("/login")},[l,d,o]),d)?(0,t.jsx)("div",{className:"container mt-4",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("div",{className:"spinner-border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Завантаження..."})})})}):l?s&&!r?(0,t.jsx)("div",{className:"container mt-4",children:(0,t.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,t.jsx)("h4",{className:"alert-heading",children:"Доступ заборонено"}),(0,t.jsx)("p",{children:"У вас недостатньо прав для доступу до цієї сторінки."})]})}):(0,t.jsx)(t.Fragment,{children:a}):null}},5174:(e,a,s)=>{"use strict";s.d(a,{A:()=>x});var t=s(7876),n=s(4232),i=s(7328),c=s.n(i),l=s(9099),r=s(5593),d=s(2605),o=s(8230),m=s.n(o);let h=()=>{let{isAuthenticated:e,isAdmin:a,user:s,logout:n}=(0,r.A)(),i=(0,l.useRouter)();return(0,t.jsx)("header",{children:(0,t.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom",children:[(0,t.jsxs)(m(),{href:"/",className:"d-flex align-items-center text-dark text-decoration-none",children:[(0,t.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"40",height:"40",className:"me-2"}),(0,t.jsx)("span",{className:"fs-4",children:"Кіт Кухар"})]}),(0,t.jsxs)("nav",{className:"d-inline-flex mt-2 mt-md-0 ms-md-auto align-items-center",children:[(0,t.jsx)(m(),{href:"/",className:"me-3 py-2 text-dark text-decoration-none ".concat("/"===i.pathname?"active":""),children:"Головна"}),(0,t.jsx)(m(),{href:"/recipes",className:"me-3 py-2 text-dark text-decoration-none ".concat(i.pathname.startsWith("/recipes")?"active":""),children:"Рецепти"}),e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m(),{href:"/add-recipe",className:"me-3 py-2 text-dark text-decoration-none ".concat("/add-recipe"===i.pathname?"active":""),children:"Додати рецепт"}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m(),{href:"/categories",className:"me-3 py-2 text-dark text-decoration-none ".concat(i.pathname.startsWith("/categories")?"active":""),children:"Категорії"}),(0,t.jsx)(m(),{href:"/tags",className:"me-3 py-2 text-dark text-decoration-none ".concat(i.pathname.startsWith("/tags")?"active":""),children:"Теги"})]})]}),e?(0,t.jsxs)("div",{className:"dropdown",children:[(0,t.jsxs)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[null==s?void 0:s.username,a&&(0,t.jsx)("span",{className:"badge bg-warning text-dark ms-1",children:"Адмін"})]}),(0,t.jsx)("ul",{className:"dropdown-menu",children:(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:"dropdown-item",onClick:()=>{n(),i.push("/login")},children:"Вийти"})})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m(),{href:"/login",className:"me-3 py-2 text-dark text-decoration-none ".concat("/login"===i.pathname?"active":""),children:"Вхід"}),(0,t.jsx)(m(),{href:"/register",className:"btn btn-outline-primary ".concat("/register"===i.pathname?"active":""),children:"Реєстрація"})]})]})]})})},x=e=>{let{children:a,title:s="Кіт Кухар - Найкращі рецепти",description:i="Найкращі рецепти від нашого котика-кухаря! Знайдіть смачні страви або поділіться власними кулінарними шедеврами."}=e,o=(0,l.useRouter)(),{user:m}=(0,r.A)();return(0,n.useEffect)(()=>{d.vF.logPageView(o.pathname,null==m?void 0:m.id)},[o.pathname,m]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c(),{children:[(0,t.jsx)("title",{children:s}),(0,t.jsx)("meta",{name:"description",content:i}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"container py-3",children:[(0,t.jsx)(h,{}),(0,t.jsx)("main",{children:a}),(0,t.jsx)("footer",{className:"pt-4 my-md-5 pt-md-5 border-top",children:(0,t.jsxs)("div",{className:"row align-items-center",children:[(0,t.jsx)("div",{className:"col-12 col-md-6",children:(0,t.jsx)("small",{className:"d-block mb-3 text-muted",children:"\xa9 2025"})}),(0,t.jsx)("div",{className:"col-12 col-md-6 text-end",children:(0,t.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"30",height:"30",className:"opacity-50"})})]})})]})]})}},5964:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/categories-tags",function(){return s(9014)}])},9014:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var t=s(7876),n=s(4232),i=s(5174),c=s(54),l=s(1040),r=s(5593),d=s(3578);let o=()=>{let[e,a]=(0,n.useState)([]),[s,i]=(0,n.useState)([]),[c,o]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[x,u]=(0,n.useState)(null),[j,p]=(0,n.useState)(null),[N,g]=(0,n.useState)(!1),[v,b]=(0,n.useState)(""),{token:f,user:y}=(0,r.A)();if(!(null==y?void 0:y.is_admin))return(0,t.jsx)("div",{className:"alert alert-warning",children:"У вас немає прав доступу до цієї сторінки."});(0,n.useEffect)(()=>{w()},[]);let w=async()=>{try{let[e,s]=await Promise.all([l.A.get(d.S.CATEGORIES),l.A.get(d.S.TAGS)]);a(e.data),i(s.data)}catch(e){b("Помилка завантаження даних")}},A=async()=>{if(c.trim()){g(!0);try{await l.A.post(d.S.CATEGORIES,{name:c},{headers:{Authorization:"Bearer ".concat(f)}}),o(""),w()}catch(e){b("Помилка створення категорії")}finally{g(!1)}}},k=async()=>{if(x){g(!0);try{await l.A.put("".concat(d.S.CATEGORIES,"/").concat(x.id),{name:x.name},{headers:{Authorization:"Bearer ".concat(f)}}),u(null),w()}catch(e){b("Помилка оновлення категорії")}finally{g(!1)}}},S=async e=>{if(confirm("Ви впевнені, що хочете видалити цю категорію?")){g(!0);try{await l.A.delete("".concat(d.S.CATEGORIES,"/").concat(e),{headers:{Authorization:"Bearer ".concat(f)}}),w()}catch(e){b("Помилка видалення категорії")}finally{g(!1)}}},C=async()=>{if(m.trim()){g(!0);try{await l.A.post(d.S.TAGS,{name:m},{headers:{Authorization:"Bearer ".concat(f)}}),h(""),w()}catch(e){b("Помилка створення тегу")}finally{g(!1)}}},E=async()=>{if(j){g(!0);try{await l.A.put("".concat(d.S.TAGS,"/").concat(j.id),{name:j.name},{headers:{Authorization:"Bearer ".concat(f)}}),p(null),w()}catch(e){b("Помилка оновлення тегу")}finally{g(!1)}}},_=async e=>{if(confirm("Ви впевнені, що хочете видалити цей тег?")){g(!0);try{await l.A.delete("".concat(d.S.TAGS,"/").concat(e),{headers:{Authorization:"Bearer ".concat(f)}}),w()}catch(e){b("Помилка видалення тегу")}finally{g(!1)}}};return(0,t.jsxs)("div",{className:"container mt-4",children:[(0,t.jsx)("h2",{children:"Керування категоріями та тегами"}),v&&(0,t.jsx)("div",{className:"alert alert-danger",role:"alert",children:v}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h4",{children:"Категорії"})}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Назва нової категорії",value:c,onChange:e=>o(e.target.value)}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:A,disabled:N||!c.trim(),children:"Додати"})]})}),(0,t.jsx)("div",{className:"list-group",children:e.map(e=>(0,t.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(null==x?void 0:x.id)===e.id?(0,t.jsx)("div",{className:"flex-grow-1 me-2",children:(0,t.jsx)("input",{type:"text",className:"form-control",value:x.name,onChange:e=>u({...x,name:e.target.value})})}):(0,t.jsx)("span",{className:"flex-grow-1",children:e.name}),(0,t.jsx)("div",{className:"btn-group btn-group-sm",children:(null==x?void 0:x.id)===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"btn btn-success",onClick:k,disabled:N,children:"Зберегти"}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>u(null),children:"Скасувати"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>u(e),children:"Редагувати"}),(0,t.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>S(e.id),disabled:N,children:"Видалити"})]})})]},e.id))})]})]})}),(0,t.jsx)("div",{className:"col-md-6",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h4",{children:"Теги"})}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Назва нового тегу",value:m,onChange:e=>h(e.target.value)}),(0,t.jsx)("button",{className:"btn btn-primary",onClick:C,disabled:N||!m.trim(),children:"Додати"})]})}),(0,t.jsx)("div",{className:"list-group",children:s.map(e=>(0,t.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(null==j?void 0:j.id)===e.id?(0,t.jsx)("div",{className:"flex-grow-1 me-2",children:(0,t.jsx)("input",{type:"text",className:"form-control",value:j.name,onChange:e=>p({...j,name:e.target.value})})}):(0,t.jsx)("span",{className:"flex-grow-1",children:e.name}),(0,t.jsx)("div",{className:"btn-group btn-group-sm",children:(null==j?void 0:j.id)===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"btn btn-success",onClick:E,disabled:N,children:"Зберегти"}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>p(null),children:"Скасувати"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>p(e),children:"Редагувати"}),(0,t.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>_(e.id),disabled:N,children:"Видалити"})]})})]},e.id))})]})]})})]})]})},m=()=>(0,t.jsx)(i.A,{title:"Керування категоріями та тегами - Кіт Кухар",description:"Адмін панель для керування категоріями та тегами",children:(0,t.jsx)(c.A,{adminRequired:!0,children:(0,t.jsx)(o,{})})})}},e=>{e.O(0,[305,40,636,593,792],()=>e(e.s=5964)),_N_E=e.O()}]);