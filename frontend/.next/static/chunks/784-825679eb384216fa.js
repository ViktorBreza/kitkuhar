"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[784],{54:(e,a,t)=>{t.d(a,{A:()=>i});var s=t(7876),n=t(4232),l=t(9099),r=t(5593);let i=e=>{let{children:a,adminRequired:t=!1}=e,{isAuthenticated:i,isAdmin:c,loading:d}=(0,r.A)(),o=(0,l.useRouter)();return((0,n.useEffect)(()=>{d||i||o.push("/login")},[i,d,o]),d)?(0,s.jsx)("div",{className:"container mt-4",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("div",{className:"spinner-border",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Завантаження..."})})})}):i?t&&!c?(0,s.jsx)("div",{className:"container mt-4",children:(0,s.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,s.jsx)("h4",{className:"alert-heading",children:"Доступ заборонено"}),(0,s.jsx)("p",{children:"У вас недостатньо прав для доступу до цієї сторінки."})]})}):(0,s.jsx)(s.Fragment,{children:a}):null}},790:(e,a,t)=>{t.d(a,{A:()=>d});var s=t(7876),n=t(4232),l=t(9099),r=t(1040),i=t(5593),c=t(3578);let d=e=>{var a,t;let{recipeId:d}=e,[o,m]=(0,n.useState)({title:"",description:"",ingredients:[{name:"",quantity:1,unit:"шт"}],steps:"",servings:1,category:null,tags:[]}),[h,x]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[g,j]=(0,n.useState)(!1),[v,b]=(0,n.useState)(""),{token:N}=(0,i.A)(),f=(0,l.useRouter)();(0,n.useEffect)(()=>{(async()=>{try{let[e,a]=await Promise.all([r.A.get("".concat(c.S.CATEGORIES)),r.A.get("".concat(c.S.TAGS))]);x(e.data),p(a.data)}catch(e){console.error("Error loading form data:",e)}})(),d&&(async()=>{try{let e=(await r.A.get("".concat(c.S.RECIPES,"/").concat(d))).data;Array.isArray(e.ingredients)||(e.ingredients=[{name:"",quantity:1,unit:"шт"}]),Array.isArray(e.tags)||(e.tags=[]),m(e)}catch(e){b("Не вдалося завантажити рецепт")}})()},[d]);let y=async e=>{if(e.preventDefault(),!o.title||!o.ingredients||0===o.ingredients.length||!o.category)return void b("Будь ласка, заповніть всі обов'язкові поля");j(!0),b("");try{var a,t,s,n;let e={title:o.title,description:o.description,ingredients:null==(a=o.ingredients)?void 0:a.filter(e=>""!==e.name.trim()),steps:"string"==typeof o.steps?o.steps:(null==(t=o.steps)?void 0:t.join("\n"))||"",servings:o.servings,category_id:null==(s=o.category)?void 0:s.id,tags:(null==(n=o.tags)?void 0:n.map(e=>e.id))||[]};d?await r.A.put("".concat(c.S.RECIPES,"/").concat(d),e,{headers:{Authorization:"Bearer ".concat(N)}}):await r.A.post(c.S.RECIPES,e,{headers:{Authorization:"Bearer ".concat(N)}}),f.push("/recipes")}catch(e){b("Помилка збереження рецепту"),console.error(e)}finally{j(!1)}},k=(e,a,t)=>{let s=[...o.ingredients||[]];s[e]={...s[e],[a]:t},m({...o,ingredients:s})};return(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[v&&(0,s.jsx)("div",{className:"alert alert-danger",role:"alert",children:v}),(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"title",className:"form-label",children:"Назва рецепту *"}),(0,s.jsx)("input",{type:"text",className:"form-control",id:"title",value:o.title||"",onChange:e=>m({...o,title:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"description",className:"form-label",children:"Опис"}),(0,s.jsx)("textarea",{className:"form-control",id:"description",rows:3,value:o.description||"",onChange:e=>m({...o,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"servings",className:"form-label",children:"Кількість порцій"}),(0,s.jsx)("input",{type:"number",className:"form-control",id:"servings",min:"1",value:o.servings||1,onChange:e=>m({...o,servings:parseInt(e.target.value)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"category",className:"form-label",children:"Категорія *"}),(0,s.jsxs)("select",{className:"form-control",id:"category",value:(null==(a=o.category)?void 0:a.id)||"",onChange:e=>{let a=parseInt(e.target.value),t=h.find(e=>e.id===a);m({...o,category:t||null})},required:!0,children:[(0,s.jsx)("option",{value:"",children:"Оберіть категорію"}),h.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"tags",className:"form-label",children:"Теги"}),(0,s.jsx)("div",{style:{maxHeight:"150px",overflowY:"auto",border:"1px solid #ced4da",borderRadius:"0.25rem",padding:"0.5rem"},children:u.map(e=>{var a;return(0,s.jsxs)("div",{className:"form-check",children:[(0,s.jsx)("input",{className:"form-check-input",type:"checkbox",id:"tag-".concat(e.id),checked:(null==(a=o.tags)?void 0:a.some(a=>a.id===e.id))||!1,onChange:a=>{let t=o.tags||[];a.target.checked?m({...o,tags:[...t,e]}):m({...o,tags:t.filter(a=>a.id!==e.id)})}}),(0,s.jsx)("label",{className:"form-check-label",htmlFor:"tag-".concat(e.id),children:e.name})]},e.id)})})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{className:"form-label",children:"Інгредієнти *"}),null==(t=o.ingredients)?void 0:t.map((e,a)=>(0,s.jsxs)("div",{className:"row mb-2",children:[(0,s.jsx)("div",{className:"col-md-5",children:(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"Назва інгредієнта",value:e.name,onChange:e=>k(a,"name",e.target.value)})}),(0,s.jsx)("div",{className:"col-md-3",children:(0,s.jsx)("input",{type:"number",className:"form-control",placeholder:"Кількість",min:"0",step:"0.1",value:e.quantity,onChange:e=>k(a,"quantity",parseFloat(e.target.value))})}),(0,s.jsx)("div",{className:"col-md-3",children:(0,s.jsx)("input",{type:"text",className:"form-control",placeholder:"Одиниця",value:e.unit,onChange:e=>k(a,"unit",e.target.value)})}),(0,s.jsx)("div",{className:"col-md-1",children:(0,s.jsx)("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>(e=>{var a;let t=null==(a=o.ingredients)?void 0:a.filter((a,t)=>t!==e);m({...o,ingredients:t})})(a),children:"\xd7"})})]},a)),(0,s.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{m({...o,ingredients:[...o.ingredients||[],{name:"",quantity:1,unit:"шт"}]})},children:"+ Додати інгредієнт"})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"steps",className:"form-label",children:"Інструкції з приготування *"}),(0,s.jsx)("textarea",{className:"form-control",id:"steps",rows:6,value:"string"==typeof o.steps?o.steps:"",onChange:e=>m({...o,steps:e.target.value}),placeholder:"Опишіть кроки приготування...",required:!0})]}),(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>f.back(),children:"Скасувати"}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?"Збереження...":d?"Оновити рецепт":"Створити рецепт"})]})]})]})})}},5174:(e,a,t)=>{t.d(a,{A:()=>x});var s=t(7876),n=t(4232),l=t(7328),r=t.n(l),i=t(9099),c=t(5593),d=t(2605),o=t(8230),m=t.n(o);let h=()=>{let{isAuthenticated:e,isAdmin:a,user:t,logout:n}=(0,c.A)(),l=(0,i.useRouter)();return(0,s.jsx)("header",{children:(0,s.jsxs)("div",{className:"d-flex flex-column flex-md-row align-items-center pb-3 mb-4 border-bottom",children:[(0,s.jsxs)(m(),{href:"/",className:"d-flex align-items-center text-dark text-decoration-none",children:[(0,s.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"40",height:"40",className:"me-2"}),(0,s.jsx)("span",{className:"fs-4",children:"Кіт Кухар"})]}),(0,s.jsxs)("nav",{className:"d-inline-flex mt-2 mt-md-0 ms-md-auto align-items-center",children:[(0,s.jsx)(m(),{href:"/",className:"me-3 py-2 text-dark text-decoration-none ".concat("/"===l.pathname?"active":""),children:"Головна"}),(0,s.jsx)(m(),{href:"/recipes",className:"me-3 py-2 text-dark text-decoration-none ".concat(l.pathname.startsWith("/recipes")?"active":""),children:"Рецепти"}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m(),{href:"/add-recipe",className:"me-3 py-2 text-dark text-decoration-none ".concat("/add-recipe"===l.pathname?"active":""),children:"Додати рецепт"}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m(),{href:"/categories",className:"me-3 py-2 text-dark text-decoration-none ".concat(l.pathname.startsWith("/categories")?"active":""),children:"Категорії"}),(0,s.jsx)(m(),{href:"/tags",className:"me-3 py-2 text-dark text-decoration-none ".concat(l.pathname.startsWith("/tags")?"active":""),children:"Теги"})]})]}),e?(0,s.jsxs)("div",{className:"dropdown",children:[(0,s.jsxs)("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[null==t?void 0:t.username,a&&(0,s.jsx)("span",{className:"badge bg-warning text-dark ms-1",children:"Адмін"})]}),(0,s.jsx)("ul",{className:"dropdown-menu",children:(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"dropdown-item",onClick:()=>{n(),l.push("/login")},children:"Вийти"})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m(),{href:"/login",className:"me-3 py-2 text-dark text-decoration-none ".concat("/login"===l.pathname?"active":""),children:"Вхід"}),(0,s.jsx)(m(),{href:"/register",className:"btn btn-outline-primary ".concat("/register"===l.pathname?"active":""),children:"Реєстрація"})]})]})]})})},x=e=>{let{children:a,title:t="Кіт Кухар - Найкращі рецепти",description:l="Найкращі рецепти від нашого котика-кухаря! Знайдіть смачні страви або поділіться власними кулінарними шедеврами."}=e,o=(0,i.useRouter)(),{user:m}=(0,c.A)();return(0,n.useEffect)(()=>{d.vF.logPageView(o.pathname,null==m?void 0:m.id)},[o.pathname,m]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:t}),(0,s.jsx)("meta",{name:"description",content:l}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("div",{className:"container py-3",children:[(0,s.jsx)(h,{}),(0,s.jsx)("main",{children:a}),(0,s.jsx)("footer",{className:"pt-4 my-md-5 pt-md-5 border-top",children:(0,s.jsxs)("div",{className:"row align-items-center",children:[(0,s.jsx)("div",{className:"col-12 col-md-6",children:(0,s.jsx)("small",{className:"d-block mb-3 text-muted",children:"\xa9 2025"})}),(0,s.jsx)("div",{className:"col-12 col-md-6 text-end",children:(0,s.jsx)("img",{src:"/favicon.ico",alt:"Логотип",width:"30",height:"30",className:"opacity-50"})})]})})]})]})}}}]);